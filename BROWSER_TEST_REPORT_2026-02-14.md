# Browser Test Report - 14 Feb 2026

## Executive Summary

**Testing Method:** Playwright headless browser  
**Pages Tested:** 40  
**Result:** 40 passed, 0 failed  
**Console Errors:** 8 pages with errors  

## Critical Issues

### 1. /kontakter/leverandorer - CRASH (ErrorBoundary)

**Error:** `TypeError: r.map is not a function`

**Root Cause:** Data fetched is not an array, trying to call `.map()` on undefined/null/object

**Impact:** Page shows error boundary, completely broken

**Fix Required:** Add null check before `.map()` or ensure API returns array

### 2. CORS Policy Blocking (3 pages)

**Affected Pages:**
- /accruals
- /customer-invoices

**Error:** `Access to fetch at 'http://localhost:8000/api/...' from origin 'http://localhost:3002' has been blocked by CORS policy`

**Root Cause:** Backend CORS not configured for localhost:3002

**Fix Required:** Add CORS middleware in backend allowing localhost:3002

### 3. Missing API Endpoints - 404 (5 pages)

**Affected Pages:**
- /aapningsbalanse → `/api/opening-balances/`
- /demo-control → unknown endpoint
- /kontakter/kunder/ny → unknown endpoint
- /kontakter/leverandorer/ny → unknown endpoint  
- /test/ehf → unknown endpoint

**Impact:** Features not functional, data not loading

**Fix Required:** Implement missing backend endpoints

## Detailed Error Log

### /aapningsbalanse
```
Failed to load resource: 404
Error fetching existing balances: AxiosError: Request failed with status code 404
```

### /accruals
```
CORS blocked: http://localhost:8000/api/accruals/?client_id=1&status=active
Failed to load accruals: TypeError: Failed to fetch
```

### /customer-invoices
```
CORS blocked: http://localhost:8000/api/customer-invoices/stats?client_id=...
Failed to fetch stats: TypeError: Failed to fetch
```

### /kontakter/leverandorer
```
TypeError: r.map is not a function
  at v (kontakter/leverandorer/page-65a25c8ef86a25d2.js:1:5509)
ErrorBoundary caught an error
```

## Pages Without Errors (32)

✅ Dashboard  
✅ Accounts  
✅ Audit  
✅ Bank reconciliation  
✅ Bank reconciliation (PowerOffice)  
✅ Bank  
✅ Bilag journal  
✅ Chart of accounts  
✅ Chat  
✅ Clients  
✅ Import (bank integration)  
✅ Import (bank transactions)  
✅ Inbox  
✅ Settings  
✅ Client settings  
✅ Customers  
✅ Suppliers (main list)  
✅ NLQ  
✅ Tasks  
✅ Period close  
✅ Reports (balance)  
✅ Reports (ledger)  
✅ Reports (income statement)  
✅ Reports (trial balance)  
✅ Reports (redirect)  
✅ Customer receivables  
✅ Supplier payables  
✅ Review queue  
✅ Settings (redirect)  
✅ Trust dashboard  
✅ Upload  
✅ VAT  
✅ Vouchers  

## Recommendations

### Priority 1 (Critical - blocks functionality)
1. Fix `/kontakter/leverandorer` crash
2. Fix CORS configuration
3. Implement missing API endpoints

### Priority 2 (UX improvements)
1. Add loading states for all data fetches
2. Add error boundaries on more pages
3. Add user-friendly error messages

### Priority 3 (Tech debt)
1. Review all API error handling
2. Add automated E2E tests
3. Add console error monitoring in production

## Test Environment

**Frontend:** Production build (npm start)  
**Backend:** http://localhost:8000  
**Browser:** Chromium (Playwright)  
**Date:** 2026-02-14 08:50 UTC

---

*Generated by automated Playwright test suite*
